from evaluation.approximate_query_processing.aqp_queries import AQPQuery, Operator

airbnb_aqp_queries = {
    'listings.price': {1: AQPQuery(aggregation_attribute='listings.price',
                                   where_conditions=[('listings.room_type', Operator.EQ, 1)],
                                   grouping_attributes=[],
                                   completion_tables=['listings']),
                       7: AQPQuery(aggregation_attribute='listings.price',
                                   where_conditions=[('listings.room_type', Operator.EQ, 1)],
                                   grouping_attributes=['hosts.host_since'],
                                   completion_tables=['listings', 'hosts']),
                       },
    'listings.property_type': {1: AQPQuery(where_conditions=[('listings.property_type', Operator.EQ, 3)],
                                           grouping_attributes=[],
                                           completion_tables=['listings']),
                               3: AQPQuery(where_conditions=[('hosts.host_since', Operator.GE, 2013)],
                                           grouping_attributes=['hosts.host_since'],
                                           completion_tables=['listings', 'hosts']),
                               },
    'listings.room_type': {0: AQPQuery(where_conditions=[('listings.room_type', Operator.EQ, 1),
                                                         ('listings.property_type', Operator.EQ, 3)],
                                       grouping_attributes=['listings.property_type'],
                                       completion_tables=['listings']),
                           5: AQPQuery(where_conditions=[('listings.accommodates', Operator.GE, 3)],
                                       grouping_attributes=['hosts.host_since'],
                                       completion_tables=['listings', 'hosts']),
                           },
    'hosts.host_since': {
        2: AQPQuery(where_conditions=[('hosts.host_since', Operator.GE, 2011)],
                    grouping_attributes=[],
                    completion_tables=['hosts']),

        6: AQPQuery(aggregation_attribute='hosts.host_since',
                    where_conditions=[('listings.room_type', Operator.EQ, 1),
                                      ('hosts.host_response_time', Operator.GE, 2)],
                    grouping_attributes=[],
                    completion_tables=['listings', 'hosts']),

    },
    'hosts.host_response_rate': {1: AQPQuery(aggregation_attribute='hosts.host_response_rate',
                                             where_conditions=[('hosts.host_response_time', Operator.GE, 2)],
                                             grouping_attributes=[],
                                             completion_tables=['hosts']),
                                 6: AQPQuery(aggregation_attribute='hosts.host_response_rate',
                                             where_conditions=[('listings.room_type', Operator.EQ, 1),
                                                               ('hosts.host_response_time', Operator.GE, 2)],
                                             grouping_attributes=[],
                                             completion_tables=['listings', 'hosts']),
                                 },
}
